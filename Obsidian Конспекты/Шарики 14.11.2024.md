```python 

import pygame
import random
import sys
import math


pygame.init()


width, height = 800, 600
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption("Шарики с случайными траекториями отскока")


black = (0, 0, 0)


class Ball:
    def __init__(self, x, y):
        self.radius = random.randint(10, 50)  # Случайный размер
        self.color = (random.randint(0, 255), random.randint(0, 255), random.randint(0, 255))  # Случайный цвет
        self.x = x
        self.y = y
        self.speed_x = random.choice([-5, 5])  # Случайное направление по X
        self.speed_y = random.choice([-5, 5])  # Случайное направление по Y

    def move(self):
        self.x += self.speed_x
        self.y += self.speed_y

        # Проверка коллизии со стенками
        if self.x - self.radius <= 0 or self.x + self.radius >= width:
            self.speed_x = -self.speed_x  # Отскок от левой и правой стенки
        if self.y - self.radius <= 0 or self.y + self.radius >= height:
            self.speed_y = -self.speed_y  # Отскок от верхней и нижней стенки

    def draw(self, surface):
        pygame.draw.circle(surface, self.color, (int(self.x), int(self.y)), self.radius)

    def check_collision(self, other):
        # Проверка коллизии с другим шариком
        distance = math.hypot(self.x - other.x, self.y - other.y)
        if distance < self.radius + other.radius:
            # Определяем нормаль между шариками
            nx = (other.x - self.x) / distance
            ny = (other.y - self.y) / distance
            
            # Генерируем случайные углы для новых скоростей
            angle = random.uniform(0, 2 * math.pi)
            speed = random.uniform(2, 5)  # Случайная скорость

            # Устанавливаем новые скорости
            self.speed_x = speed * math.cos(angle)
            self.speed_y = speed * math.sin(angle)

            # Генерируем новые углы и скорости для другого шарика
            angle = random.uniform(0, 2 * math.pi)
            speed = random.uniform(2, 5)
            other.speed_x = speed * math.cos(angle)
            other.speed_y = speed * math.sin(angle)

# Главный цикл
balls = []
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        elif event.type == pygame.MOUSEBUTTONDOWN:
            # Создание нового шарика в месте клика
            x, y = event.pos
            balls.append(Ball(x, y))

    # Заполнение фона
    screen.fill(black)

    # Движение и отрисовка шариков
    for i in range(len(balls)):
        balls[i].move()
        balls[i].draw(screen)

        # Проверка коллизий с другими шариками
        for j in range(i + 1, len(balls)):
            balls[i].check_collision(balls[j])

    # Обновление экрана
    pygame.display.flip()
    pygame.time.delay(30)  # Задержка для контроля FPS
```
### Изменения в коде:

1. **Случайные углы и скорости**: При обнаружении коллизии между шариками, мы генерируем случайный угол и скорость для каждого шарика, что приводит к изменению их направления движения на случайные значения.
2. **Метод `check_collision`**: Теперь при коллизии мы не просто меняем местами скорости, а задаем новые случайные скорости для обоих шариков.

### Как запустить:

1. Убедитесь, что у вас установлен Pygame (`pip install pygame`).
2. Скопируйте обновленный код в файл с расширением `.py`, например, `bouncing_balls_random_trajectory.py`.
3. Запустите файл с помощью Python.

Теперь шарики будут отскакивать друг от друга с случайными траекториями
## Как работает Pygame?

